A port of leaf browser that took longer than it really should
